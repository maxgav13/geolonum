<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capitulo 3 Funcionamiento avanzado de R | Geologia Numerica: Ciencia de Datos para Geociencias</title>
  <meta name="description" content="Este documento compila el funcionamiento basico del software estadistico y de programacion R, asi como rutinas y/o comandos especificos para resolver problemas de analisis de datos en geociencias." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Capitulo 3 Funcionamiento avanzado de R | Geologia Numerica: Ciencia de Datos para Geociencias" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este documento compila el funcionamiento basico del software estadistico y de programacion R, asi como rutinas y/o comandos especificos para resolver problemas de analisis de datos en geociencias." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capitulo 3 Funcionamiento avanzado de R | Geologia Numerica: Ciencia de Datos para Geociencias" />
  
  <meta name="twitter:description" content="Este documento compila el funcionamiento basico del software estadistico y de programacion R, asi como rutinas y/o comandos especificos para resolver problemas de analisis de datos en geociencias." />
  

<meta name="author" content="Maximiliano Garnier Villarreal" />


<meta name="date" content="2020-03-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basico.html">
<link rel="next" href="graficos-1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<script src="libs/plotly-binding-4.9.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.11/datatables.js"></script>
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.19/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.19/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-7.0.1/css/motion.css" rel="stylesheet" />
<link href="libs/highcharts-7.0.1/css/htmlwdgtgrid.css" rel="stylesheet" />
<script src="libs/highcharts-7.0.1/highcharts.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-3d.js"></script>
<script src="libs/highcharts-7.0.1/highcharts-more.js"></script>
<script src="libs/highcharts-7.0.1/modules/stock.js"></script>
<script src="libs/highcharts-7.0.1/modules/map.js"></script>
<script src="libs/highcharts-7.0.1/modules/annotations.js"></script>
<script src="libs/highcharts-7.0.1/modules/boost.js"></script>
<script src="libs/highcharts-7.0.1/modules/data.js"></script>
<script src="libs/highcharts-7.0.1/modules/drag-panes.js"></script>
<script src="libs/highcharts-7.0.1/modules/drilldown.js"></script>
<script src="libs/highcharts-7.0.1/modules/item-series.js"></script>
<script src="libs/highcharts-7.0.1/modules/offline-exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-7.0.1/modules/exporting.js"></script>
<script src="libs/highcharts-7.0.1/modules/export-data.js"></script>
<script src="libs/highcharts-7.0.1/modules/funnel.js"></script>
<script src="libs/highcharts-7.0.1/modules/heatmap.js"></script>
<script src="libs/highcharts-7.0.1/modules/treemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/sankey.js"></script>
<script src="libs/highcharts-7.0.1/modules/solid-gauge.js"></script>
<script src="libs/highcharts-7.0.1/modules/streamgraph.js"></script>
<script src="libs/highcharts-7.0.1/modules/sunburst.js"></script>
<script src="libs/highcharts-7.0.1/modules/vector.js"></script>
<script src="libs/highcharts-7.0.1/modules/wordcloud.js"></script>
<script src="libs/highcharts-7.0.1/modules/xrange.js"></script>
<script src="libs/highcharts-7.0.1/modules/tilemap.js"></script>
<script src="libs/highcharts-7.0.1/modules/venn.js"></script>
<script src="libs/highcharts-7.0.1/modules/gantt.js"></script>
<script src="libs/highcharts-7.0.1/modules/timeline.js"></script>
<script src="libs/highcharts-7.0.1/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-7.0.1/plugins/grouped-categories.js"></script>
<script src="libs/highcharts-7.0.1/plugins/motion.js"></script>
<script src="libs/highcharts-7.0.1/plugins/multicolor_series.js"></script>
<script src="libs/highcharts-7.0.1/custom/reset.js"></script>
<script src="libs/highcharts-7.0.1/custom/symbols-extra.js"></script>
<script src="libs/highcharts-7.0.1/custom/text-symbols.js"></script>
<script src="libs/highchart-binding-0.7.0/highchart.js"></script>
<script src="libs/highcharts-regression.js-7.0.1/highcharts-regression.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>
<script src="libs/leaflet-providers-1.1.17/leaflet-providers.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<link href="libs/PopupTable-0.0.1/popup.css" rel="stylesheet" />
<script src="libs/pacifico-1/data_stars_pacificocdf13b.txt"></script>
<script src="libs/joda-0.0.1/joda.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">G-4101  Geologia Numerica</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a></li>
<li class="part"><span><b>R</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduccion</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#instalacion-de-r-y-rstudio"><i class="fa fa-check"></i><b>1.1</b> Instalacion de R y RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#paquetes"><i class="fa fa-check"></i><b>1.2</b> Paquetes</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#ayuda-en-r"><i class="fa fa-check"></i><b>1.3</b> Ayuda en R</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#rmarkdown"><i class="fa fa-check"></i><b>1.4</b> RMarkdown</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#tipos-de-resultados"><i class="fa fa-check"></i><b>1.4.1</b> Tipos de resultados</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#formulas"><i class="fa fa-check"></i><b>1.4.2</b> Formulas</a></li>
<li class="chapter" data-level="1.4.3" data-path="intro.html"><a href="intro.html#importando-datos"><i class="fa fa-check"></i><b>1.4.3</b> Importando datos</a></li>
<li class="chapter" data-level="1.4.4" data-path="intro.html"><a href="intro.html#calculos-en-linea"><i class="fa fa-check"></i><b>1.4.4</b> Calculos en linea</a></li>
<li class="chapter" data-level="1.4.5" data-path="intro.html"><a href="intro.html#importando-figuras"><i class="fa fa-check"></i><b>1.4.5</b> Importando figuras</a></li>
<li class="chapter" data-level="1.4.6" data-path="intro.html"><a href="intro.html#salvando-y-compartiendo"><i class="fa fa-check"></i><b>1.4.6</b> Salvando y compartiendo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basico.html"><a href="basico.html"><i class="fa fa-check"></i><b>2</b> Funcionamiento basico de R</a><ul>
<li class="chapter" data-level="2.1" data-path="basico.html"><a href="basico.html#operaciones-basicas"><i class="fa fa-check"></i><b>2.1</b> Operaciones basicas</a></li>
<li class="chapter" data-level="2.2" data-path="basico.html"><a href="basico.html#crear-objetos"><i class="fa fa-check"></i><b>2.2</b> Crear objetos</a></li>
<li class="chapter" data-level="2.3" data-path="basico.html"><a href="basico.html#vectores"><i class="fa fa-check"></i><b>2.3</b> Vectores</a><ul>
<li class="chapter" data-level="2.3.1" data-path="basico.html"><a href="basico.html#numericos"><i class="fa fa-check"></i><b>2.3.1</b> Numericos</a></li>
<li class="chapter" data-level="2.3.2" data-path="basico.html"><a href="basico.html#texto-string-character"><i class="fa fa-check"></i><b>2.3.2</b> Texto (string, character)</a></li>
<li class="chapter" data-level="2.3.3" data-path="basico.html"><a href="basico.html#categoricos-factores"><i class="fa fa-check"></i><b>2.3.3</b> Categoricos (factores)</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basico.html"><a href="basico.html#matrices"><i class="fa fa-check"></i><b>2.4</b> Matrices</a></li>
<li class="chapter" data-level="2.5" data-path="basico.html"><a href="basico.html#dataframes-listas-y-tibbles"><i class="fa fa-check"></i><b>2.5</b> DataFrames, listas y tibbles</a></li>
<li class="chapter" data-level="2.6" data-path="basico.html"><a href="basico.html#verificando-objetos"><i class="fa fa-check"></i><b>2.6</b> Verificando objetos</a></li>
<li class="chapter" data-level="2.7" data-path="basico.html"><a href="basico.html#guardando-el-espacio-de-trabajo"><i class="fa fa-check"></i><b>2.7</b> Guardando el espacio de trabajo</a></li>
<li class="chapter" data-level="2.8" data-path="basico.html"><a href="basico.html#importandocargando-datos"><i class="fa fa-check"></i><b>2.8</b> Importando/cargando datos</a></li>
<li class="chapter" data-level="2.9" data-path="basico.html"><a href="basico.html#exportando-datos"><i class="fa fa-check"></i><b>2.9</b> Exportando datos</a></li>
<li class="chapter" data-level="2.10" data-path="basico.html"><a href="basico.html#inspeccionando-los-datos"><i class="fa fa-check"></i><b>2.10</b> Inspeccionando los datos</a></li>
<li class="chapter" data-level="2.11" data-path="basico.html"><a href="basico.html#descripciones-generales-globales"><i class="fa fa-check"></i><b>2.11</b> Descripciones generales (globales)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="avanzado.html"><a href="avanzado.html"><i class="fa fa-check"></i><b>3</b> Funcionamiento avanzado de R</a><ul>
<li class="chapter" data-level="3.1" data-path="avanzado.html"><a href="avanzado.html#operadores-logicos"><i class="fa fa-check"></i><b>3.1</b> Operadores logicos</a></li>
<li class="chapter" data-level="3.2" data-path="avanzado.html"><a href="avanzado.html#operador-de-secuencia-pipe-operator"><i class="fa fa-check"></i><b>3.2</b> Operador de secuencia (Pipe operator)</a></li>
<li class="chapter" data-level="3.3" data-path="avanzado.html"><a href="avanzado.html#resumen-de-variables"><i class="fa fa-check"></i><b>3.3</b> Resumen de variables</a></li>
<li class="chapter" data-level="3.4" data-path="avanzado.html"><a href="avanzado.html#seleccion-y-renombre-de-variables"><i class="fa fa-check"></i><b>3.4</b> Seleccion y renombre de variables</a><ul>
<li class="chapter" data-level="3.4.1" data-path="avanzado.html"><a href="avanzado.html#select-helpers"><i class="fa fa-check"></i><b>3.4.1</b> <code>select</code> helpers</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="avanzado.html"><a href="avanzado.html#filtrado-de-observaciones"><i class="fa fa-check"></i><b>3.5</b> Filtrado de observaciones</a></li>
<li class="chapter" data-level="3.6" data-path="avanzado.html"><a href="avanzado.html#orden-de-acuerdo-a-variables"><i class="fa fa-check"></i><b>3.6</b> Orden de acuerdo a variables</a></li>
<li class="chapter" data-level="3.7" data-path="avanzado.html"><a href="avanzado.html#creacion-de-variables"><i class="fa fa-check"></i><b>3.7</b> Creacion de variables</a></li>
<li class="chapter" data-level="3.8" data-path="avanzado.html"><a href="avanzado.html#conteo-de-variables-cualitativas"><i class="fa fa-check"></i><b>3.8</b> Conteo de variables cualitativas</a></li>
<li class="chapter" data-level="3.9" data-path="avanzado.html"><a href="avanzado.html#tabla-interactiva"><i class="fa fa-check"></i><b>3.9</b> Tabla interactiva</a></li>
<li class="chapter" data-level="3.10" data-path="avanzado.html"><a href="avanzado.html#datos-relacionales"><i class="fa fa-check"></i><b>3.10</b> Datos relacionales</a><ul>
<li class="chapter" data-level="3.10.1" data-path="avanzado.html"><a href="avanzado.html#uniones-de-transformacion"><i class="fa fa-check"></i><b>3.10.1</b> Uniones de transformacion</a></li>
<li class="chapter" data-level="3.10.2" data-path="avanzado.html"><a href="avanzado.html#uniones-de-filtro"><i class="fa fa-check"></i><b>3.10.2</b> Uniones de filtro</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="avanzado.html"><a href="avanzado.html#datos-ordenados-tidy-data"><i class="fa fa-check"></i><b>3.11</b> Datos ordenados (Tidy data)</a><ul>
<li class="chapter" data-level="3.11.1" data-path="avanzado.html"><a href="avanzado.html#formatos-largo-y-ancho"><i class="fa fa-check"></i><b>3.11.1</b> Formatos largo y ancho</a></li>
<li class="chapter" data-level="3.11.2" data-path="avanzado.html"><a href="avanzado.html#separar-y-unir"><i class="fa fa-check"></i><b>3.11.2</b> Separar y unir</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="avanzado.html"><a href="avanzado.html#nest"><i class="fa fa-check"></i><b>3.12</b> Datos anidados (Nesting)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="graficos-1.html"><a href="graficos-1.html"><i class="fa fa-check"></i><b>4</b> Graficos</a><ul>
<li class="chapter" data-level="4.1" data-path="graficos-1.html"><a href="graficos-1.html#estaticos"><i class="fa fa-check"></i><b>4.1</b> Estaticos</a><ul>
<li class="chapter" data-level="4.1.1" data-path="graficos-1.html"><a href="graficos-1.html#histograma"><i class="fa fa-check"></i><b>4.1.1</b> Histograma</a></li>
<li class="chapter" data-level="4.1.2" data-path="graficos-1.html"><a href="graficos-1.html#barras"><i class="fa fa-check"></i><b>4.1.2</b> Barras</a></li>
<li class="chapter" data-level="4.1.3" data-path="graficos-1.html"><a href="graficos-1.html#boxplot"><i class="fa fa-check"></i><b>4.1.3</b> Boxplot</a></li>
<li class="chapter" data-level="4.1.4" data-path="graficos-1.html"><a href="graficos-1.html#dispersion"><i class="fa fa-check"></i><b>4.1.4</b> Dispersion</a></li>
<li class="chapter" data-level="4.1.5" data-path="graficos-1.html"><a href="graficos-1.html#lineas"><i class="fa fa-check"></i><b>4.1.5</b> Lineas</a></li>
<li class="chapter" data-level="4.1.6" data-path="graficos-1.html"><a href="graficos-1.html#graficos-estadisticos"><i class="fa fa-check"></i><b>4.1.6</b> Graficos estadisticos</a></li>
<li class="chapter" data-level="4.1.7" data-path="graficos-1.html"><a href="graficos-1.html#transformacion-de-ejes"><i class="fa fa-check"></i><b>4.1.7</b> Transformacion de ejes</a></li>
<li class="chapter" data-level="4.1.8" data-path="graficos-1.html"><a href="graficos-1.html#limites-de-ejes-zoom"><i class="fa fa-check"></i><b>4.1.8</b> Limites de ejes (Zoom)</a></li>
<li class="chapter" data-level="4.1.9" data-path="graficos-1.html"><a href="graficos-1.html#salvando-graficos"><i class="fa fa-check"></i><b>4.1.9</b> Salvando graficos</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="graficos-1.html"><a href="graficos-1.html#interactivos"><i class="fa fa-check"></i><b>4.2</b> Interactivos</a><ul>
<li class="chapter" data-level="4.2.1" data-path="graficos-1.html"><a href="graficos-1.html#histograma-1"><i class="fa fa-check"></i><b>4.2.1</b> Histograma</a></li>
<li class="chapter" data-level="4.2.2" data-path="graficos-1.html"><a href="graficos-1.html#barras-1"><i class="fa fa-check"></i><b>4.2.2</b> Barras</a></li>
<li class="chapter" data-level="4.2.3" data-path="graficos-1.html"><a href="graficos-1.html#boxplot-1"><i class="fa fa-check"></i><b>4.2.3</b> Boxplot</a></li>
<li class="chapter" data-level="4.2.4" data-path="graficos-1.html"><a href="graficos-1.html#dispersion-1"><i class="fa fa-check"></i><b>4.2.4</b> Dispersion</a></li>
<li class="chapter" data-level="4.2.5" data-path="graficos-1.html"><a href="graficos-1.html#lineas-1"><i class="fa fa-check"></i><b>4.2.5</b> Lineas</a></li>
<li class="chapter" data-level="4.2.6" data-path="graficos-1.html"><a href="graficos-1.html#transformacion-de-ejes-1"><i class="fa fa-check"></i><b>4.2.6</b> Transformacion de ejes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html"><i class="fa fa-check"></i><b>5</b> Iteracion con <code>purrr</code></a><ul>
<li class="chapter" data-level="5.1" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html#iterando-sobre-un-objeto"><i class="fa fa-check"></i><b>5.1</b> Iterando sobre un objeto</a></li>
<li class="chapter" data-level="5.2" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html#iterando-sobre-dos-objetos"><i class="fa fa-check"></i><b>5.2</b> Iterando sobre dos objetos</a></li>
<li class="chapter" data-level="5.3" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html#leyendo-archivos-y-combinandolos"><i class="fa fa-check"></i><b>5.3</b> Leyendo archivos y combinandolos</a></li>
<li class="chapter" data-level="5.4" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html#datos-anidados-caso-1"><i class="fa fa-check"></i><b>5.4</b> Datos anidados, caso 1</a><ul>
<li class="chapter" data-level="5.4.1" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html#efectos-secundarios"><i class="fa fa-check"></i><b>5.4.1</b> Efectos secundarios</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="iteracion-con-purrr.html"><a href="iteracion-con-purrr.html#datos-anidados-caso-2"><i class="fa fa-check"></i><b>5.5</b> Datos anidados, caso 2</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datos-espaciales.html"><a href="datos-espaciales.html"><i class="fa fa-check"></i><b>6</b> Datos espaciales</a><ul>
<li class="chapter" data-level="6.1" data-path="datos-espaciales.html"><a href="datos-espaciales.html#paquetes-para-datos-espaciales"><i class="fa fa-check"></i><b>6.1</b> Paquetes para datos espaciales</a></li>
<li class="chapter" data-level="6.2" data-path="datos-espaciales.html"><a href="datos-espaciales.html#sistemas-de-referencias-de-coordenadas-crs"><i class="fa fa-check"></i><b>6.2</b> Sistemas de Referencias de Coordenadas (CRS)</a></li>
<li class="chapter" data-level="6.3" data-path="datos-espaciales.html"><a href="datos-espaciales.html#importar-datos"><i class="fa fa-check"></i><b>6.3</b> Importar datos</a><ul>
<li class="chapter" data-level="6.3.1" data-path="datos-espaciales.html"><a href="datos-espaciales.html#desde-archivos-de-texto"><i class="fa fa-check"></i><b>6.3.1</b> Desde archivos de texto</a></li>
<li class="chapter" data-level="6.3.2" data-path="datos-espaciales.html"><a href="datos-espaciales.html#desde-archivos-espaciales"><i class="fa fa-check"></i><b>6.3.2</b> Desde archivos espaciales</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="datos-espaciales.html"><a href="datos-espaciales.html#exportar-datos"><i class="fa fa-check"></i><b>6.4</b> Exportar datos</a><ul>
<li class="chapter" data-level="6.4.1" data-path="datos-espaciales.html"><a href="datos-espaciales.html#vectoriales"><i class="fa fa-check"></i><b>6.4.1</b> Vectoriales</a></li>
<li class="chapter" data-level="6.4.2" data-path="datos-espaciales.html"><a href="datos-espaciales.html#raster-1"><i class="fa fa-check"></i><b>6.4.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="datos-espaciales.html"><a href="datos-espaciales.html#mapas"><i class="fa fa-check"></i><b>6.5</b> Mapas</a><ul>
<li class="chapter" data-level="6.5.1" data-path="datos-espaciales.html"><a href="datos-espaciales.html#estaticos-1"><i class="fa fa-check"></i><b>6.5.1</b> Estaticos</a></li>
<li class="chapter" data-level="6.5.2" data-path="datos-espaciales.html"><a href="datos-espaciales.html#dinamicos"><i class="fa fa-check"></i><b>6.5.2</b> Dinamicos</a></li>
<li class="chapter" data-level="6.5.3" data-path="datos-espaciales.html"><a href="datos-espaciales.html#modelos-de-sombras"><i class="fa fa-check"></i><b>6.5.3</b> Modelos de sombras</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Analisis de datos</b></span></li>
<li class="chapter" data-level="7" data-path="algebra-lineal.html"><a href="algebra-lineal.html"><i class="fa fa-check"></i><b>7</b> Algebra lineal</a></li>
<li class="chapter" data-level="8" data-path="estadistica-descriptiva-univariable.html"><a href="estadistica-descriptiva-univariable.html"><i class="fa fa-check"></i><b>8</b> Estadistica Descriptiva Univariable</a></li>
<li class="chapter" data-level="9" data-path="estadistica-descriptiva-bivariable.html"><a href="estadistica-descriptiva-bivariable.html"><i class="fa fa-check"></i><b>9</b> Estadistica Descriptiva Bivariable</a></li>
<li class="chapter" data-level="10" data-path="probabilidad.html"><a href="probabilidad.html"><i class="fa fa-check"></i><b>10</b> Probabilidad</a></li>
<li class="chapter" data-level="11" data-path="distribuciones-de-probabilidad.html"><a href="distribuciones-de-probabilidad.html"><i class="fa fa-check"></i><b>11</b> Distribuciones de Probabilidad</a></li>
<li class="chapter" data-level="12" data-path="introduccion-a-estadistica-inferencial.html"><a href="introduccion-a-estadistica-inferencial.html"><i class="fa fa-check"></i><b>12</b> Introduccion a Estadistica Inferencial</a></li>
<li class="chapter" data-level="13" data-path="estimacion.html"><a href="estimacion.html"><i class="fa fa-check"></i><b>13</b> Estimacion</a></li>
<li class="chapter" data-level="14" data-path="pruebas-estadisticas.html"><a href="pruebas-estadisticas.html"><i class="fa fa-check"></i><b>14</b> Pruebas Estadisticas</a></li>
<li class="chapter" data-level="15" data-path="estadistica-no-parametrica.html"><a href="estadistica-no-parametrica.html"><i class="fa fa-check"></i><b>15</b> Estadistica No Parametrica</a></li>
<li class="chapter" data-level="16" data-path="estadistica-direccional.html"><a href="estadistica-direccional.html"><i class="fa fa-check"></i><b>16</b> Estadistica Direccional</a></li>
<li class="chapter" data-level="17" data-path="secuencias-de-datos.html"><a href="secuencias-de-datos.html"><i class="fa fa-check"></i><b>17</b> Secuencias de Datos</a></li>
<li class="chapter" data-level="18" data-path="geoestadistica.html"><a href="geoestadistica.html"><i class="fa fa-check"></i><b>18</b> Geoestadistica</a></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referencias</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Creado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Geologia Numerica: Ciencia de Datos para Geociencias</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="avanzado" class="section level1">
<h1><span class="header-section-number">Capitulo 3</span> Funcionamiento avanzado de R</h1>
<p>En el capitulo anterior se mostro de manera muy rapida las funciones basicas de <strong>R</strong>, esto porque de ahora en adelante se va a enfocar en el uso de funciones del <em>tidyverse</em> <span class="citation">(Wickham et al., <a href="#ref-tidyverse2019">2019</a>)</span>. Este meta-paquete es uno que engloba a un monton de paquetes que se rigen bajo el paradigma de datos ordenados (tidy data). Datos ordenados quiere decir una observacion por fila y cada variable en su columna. Lo que se cubre en este capitulo y mas se puede encontrar en “R for Data Science” <span class="citation">(Grolemund &amp; Wickham, <a href="#ref-grolemund2016">2016</a>)</span>.</p>
<p>En este capitulo se van a utilizar los siguientes paquetes:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(babynames)
<span class="kw">library</span>(nycflights13)
<span class="kw">library</span>(gapminder)
<span class="kw">library</span>(DT)
<span class="kw">library</span>(rio)
<span class="kw">library</span>(tidyverse)</code></pre>
<p>Los tres primeros corresponden con conjuntos de datos. Asi mismo se vuelven a importar los datos con que se venia trabajando:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;airquality&quot;</span>)
dat1 &lt;-<span class="st"> </span><span class="kw">import</span>(<span class="st">&quot;data/LungCapData2.csv&quot;</span>, <span class="dt">setclass =</span> <span class="st">&#39;tibble&#39;</span>)
titanic &lt;-<span class="st"> </span><span class="kw">import</span>(<span class="st">&quot;data/titanic.csv&quot;</span>, <span class="dt">setclass =</span> <span class="st">&#39;tibble&#39;</span>)</code></pre>
<p>Los paquetes mas usados e importantes del <em>tidyverse</em> son:</p>
<ul>
<li><em>dplyr</em>: Manipulacion de datos mediante seleccion, filtrado, creacion, agrupamiento, arreglo y resumen de tablas</li>
<li><em>tidyr</em>: Convierte datos a ordenados y viceversa</li>
<li><em>ggplot2</em>: Paquete para crear graficos de alta calidad y personalizables</li>
<li><em>purrr</em>: Brinda funciones para la iteracion sobre vectores, listas y tablas</li>
<li><em>forcats</em>: Manipulacion de datos categoricos (factores)</li>
<li><em>stringr</em>: Manipulacion de datos de texto</li>
<li><em>lubridate</em>: Manipulacion de fechas</li>
</ul>
<p>Un punto importante a destacar, es que en todas (sino la mayoria) de las funciones del <em>tidyverse</em> la tabla de datos es el primer argumento.</p>
<div id="operadores-logicos" class="section level2">
<h2><span class="header-section-number">3.1</span> Operadores logicos</h2>
<p>Operadores logicos permiten hacer comparaciones o pruebas, donde usualmente el resultado es <code>TRUE</code> o <code>FALSE</code>. En terminos numericos <code>TRUE</code> equivale a 1 y <code>FALSE</code> a 0. Los operadores logicos mas usados son:</p>
<ul>
<li><code>&lt;</code>, menor que</li>
<li><code>&lt;=</code>, menor o igual que</li>
<li><code>==</code>, igual que</li>
<li><code>!=</code>, no igual que</li>
<li><code>&gt;</code>, mayor que</li>
<li><code>&gt;=</code>, mayor o igual que</li>
<li><code>%in%</code>, pertenencia</li>
</ul>
<p>Aqui se asigna 4 a <code>x</code> y se aplican varios de los operadores logicos para cuestionar el contenido de el objeto <code>x</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">4</span>
x <span class="op">==</span><span class="st"> </span><span class="dv">4</span></code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x <span class="op">!=</span><span class="st"> </span><span class="dv">4</span></code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x <span class="op">&lt;</span><span class="st"> </span><span class="dv">4</span></code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span></code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Estos operdores se pueden usar igualmente en vectores. Recordando que el resultado de una operacion logica es <code>TRUE</code> o <code>FALSE</code>, el vector resultante es del tipo logico. Si se desea acceder a los elementos que cumplen la condicion hay que aplicar el vector logico sobre el vector, donde va a extrear los elementos que coinciden con <code>TRUE</code>.</p>
<p>Aqui se crea un vector numerico, y se tratan de extraer los valores menores a 70. Se muestra la forma basica de <strong>R</strong> (<code>vector[condicion]</code>) y una forma mas directa e intuitiva que ofrece <em>purrr</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">95</span>, <span class="dv">90</span>, <span class="dv">58</span>, <span class="dv">87</span>, <span class="dv">62</span>, <span class="dv">75</span>)
y <span class="op">&lt;</span><span class="st"> </span><span class="dv">70</span></code></pre>
<pre><code>## [1] FALSE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">y[y <span class="op">&lt;</span><span class="st"> </span><span class="dv">70</span>]</code></pre>
<pre><code>## [1] 58 62</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">keep</span>(y, <span class="op">~</span>.x <span class="op">&lt;</span><span class="st"> </span><span class="dv">70</span>) <span class="co"># purrr</span></code></pre>
<pre><code>## [1] 58 62</code></pre>
</div>
<div id="operador-de-secuencia-pipe-operator" class="section level2">
<h2><span class="header-section-number">3.2</span> Operador de secuencia (Pipe operator)</h2>
<p>Uno de los operadores basicos en el <em>tidyverse</em> es el pipe operator (<code>%&gt;%</code>). Este permite que el resultado antes del operador sea la (primer) entrada de lo que se va a hacer despues del operador (<code>x %&gt;% f(y)</code> es lo mismo que <code>f(x,y)</code>).</p>
<p>El shortcut para escribirlo es:</p>
<ul>
<li>Mac: <em>Cmd + Shift + M</em></li>
<li>Windows: <em>Ctrl + Shift + M</em></li>
</ul>
<p>La ventaja es que permite encadenar operaciones sin necesidad de salvar objetos intermedios y es mas facil de leer que encerrar operaciones una dentro de la otra. Se ejemplifica con un caso sencillo, donde se tiene un vector de errores y se quiere calcular el error cuadratico medio (RMSE por sus isglas en ingles).</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">26</span>)
e =<span class="st"> </span><span class="kw">runif</span>(<span class="dv">50</span>,<span class="op">-</span><span class="dv">10</span>,<span class="dv">10</span>)
<span class="kw">round</span>(<span class="kw">sqrt</span>(<span class="kw">mean</span>(e<span class="op">^</span><span class="dv">2</span>)),<span class="dv">3</span>) <span class="co"># forma clasica</span></code></pre>
<pre><code>## [1] 5.595</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">e <span class="op">%&gt;%</span><span class="st"> </span>.<span class="op">^</span><span class="dv">2</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sqrt</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">3</span>) <span class="co"># usando el operador</span></code></pre>
<pre><code>## [1] 5.595</code></pre>
<p>Lo anterior se lee: agarre el vector <code>e</code>, eleve sus valores al cuadrado, despues calcule la media, despues saquele la raiz y por ultimo redondeelo a 3 cifras.</p>
</div>
<div id="resumen-de-variables" class="section level2">
<h2><span class="header-section-number">3.3</span> Resumen de variables</h2>
<p>Para resumir datos la funcion principal es <code>summarise</code>, que colapsa una o varias columnas a un dato resumen. Muchas veces se tiene una variable agrupadora (factor) en los datos y se requiere calcular estadisticas por grupo, para esto se usa <code>group_by</code> junto con <code>summarise</code>. En <code>group_by</code> se pueden incluir mas de una variable agrupadora.</p>
<p>Funciones que ayudan a resumir datos son:</p>
<ul>
<li><code>first(n)</code>, el primer elemento del vector <code>x</code></li>
<li><code>last(x)</code>, el ultimo elemento del vector <code>x</code></li>
<li><code>nth(x, n)</code>, el elemento <code>n</code> del vector <code>x</code></li>
<li><code>n()</code>, el numero de filas en una tabla u observaciones en un grupo</li>
<li><code>n_distinct(x)</code>, el numero de valores unicos en el vector <code>x</code></li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Gender) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="kw">mean</span>(Age))</code></pre>
<pre><code>## # A tibble: 2 x 2
##   Gender `mean(Age)`
##   &lt;chr&gt;        &lt;dbl&gt;
## 1 female        9.84
## 2 male         10.0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Gender,Smoke) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="kw">mean</span>(Age))</code></pre>
<pre><code>## # A tibble: 4 x 3
##   Gender Smoke `mean(Age)`
##   &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;
## 1 female no           9.37
## 2 female yes         13.3 
## 3 male   no           9.69
## 4 male   yes         13.9</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Gender) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">N=</span><span class="kw">n</span>(),
            <span class="kw">mean</span>(Age),
            <span class="kw">mean</span>(Height),
            <span class="kw">mean</span>(LungCap))</code></pre>
<pre><code>## # A tibble: 2 x 5
##   Gender     N `mean(Age)` `mean(Height)` `mean(LungCap)`
##   &lt;chr&gt;  &lt;int&gt;       &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;
## 1 female   318        9.84           60.2            5.35
## 2 male     336       10.0            62.0            6.44</code></pre>
</div>
<div id="seleccion-y-renombre-de-variables" class="section level2">
<h2><span class="header-section-number">3.4</span> Seleccion y renombre de variables</h2>
<p>Para seleccionar columnas la funcion es <code>select</code>, la cual puede usar numeros o nombres y los nombres no tienen que llevar comillas. Esto tambien permite reordenar las columans de una tabla. Para el caso de obtener una columna como vector se usa <code>pull</code> con el numero o nombre de la columna a jalar. Durante la seleccion se puede cambiar el nombre de la variable, o usando <code>rename</code>.</p>
<p>Funciones que ayudan a seleccionar variables son:</p>
<ul>
<li><code>starts_with('X')</code>, todas las columnas que empiezan con ‘X’,</li>
<li><code>ends_with('X')</code>, todas las columnas que terminan con ‘X’,</li>
<li><code>contains('X')</code>, todas las columnas que contienen ‘X’,</li>
<li><code>matches('X')</code>, todas las columnas que coinciden con ‘X’</li>
</ul>
<p>Aqui se mezcla funciones de resumen y seleccion para crear resumen de las variables seleccionadas.</p>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Gender) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Age,Height) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise_all</span>(mean)</code></pre>
<pre><code>## Adding missing grouping variables: `Gender`</code></pre>
<pre><code>## # A tibble: 2 x 3
##   Gender   Age Height
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 female  9.84   60.2
## 2 male   10.0    62.0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Gender) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Age,Height) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarise_all</span>(<span class="dt">.funs =</span> <span class="kw">list</span>(<span class="op">~</span><span class="kw">mean</span>(.),
                             <span class="op">~</span><span class="kw">sd</span>(.)))</code></pre>
<pre><code>## Adding missing grouping variables: `Gender`</code></pre>
<pre><code>## # A tibble: 2 x 5
##   Gender Age_mean Height_mean Age_sd Height_sd
##   &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;
## 1 female     9.84        60.2   2.93      4.79
## 2 male      10.0         62.0   2.98      6.33</code></pre>
<p>Aqui se muestra la seleccion de variables, que resulta en un reordenamiento de las mismas. Asi mismo se puede deseleccionar lo que no se quiere, usando <code>-</code> para indicar las columans que no se quieren.</p>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Temp,Wind,Ozone)</code></pre>
<pre><code>## # A tibble: 153 x 3
##     Temp  Wind Ozone
##    &lt;int&gt; &lt;dbl&gt; &lt;int&gt;
##  1    67   7.4    41
##  2    72   8      36
##  3    74  12.6    12
##  4    62  11.5    18
##  5    56  14.3    NA
##  6    66  14.9    28
##  7    65   8.6    23
##  8    59  13.8    19
##  9    61  20.1     8
## 10    69   8.6    NA
## # … with 143 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>Smoke)</code></pre>
<pre><code>## # A tibble: 654 x 4
##      Age LungCap Height Gender
##    &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; 
##  1     9    3.12   57   female
##  2     8    3.17   67.5 female
##  3     7    3.16   54.5 female
##  4     9    2.67   53   male  
##  5     9    3.68   57   male  
##  6     8    5.01   61   female
##  7     6    3.76   58   female
##  8     6    2.24   56   female
##  9     8    3.96   58.5 female
## 10     9    3.83   60   female
## # … with 644 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">pull</span>(Age)</code></pre>
<pre><code>##   [1]  9  8  7  9  9  8  6  6  8  9  6  8  8  8  8  7  5  6  9  9  5  5  4  7  9
##  [26]  3  9  5  8  9  5  9  8  7  5  8  9  8  8  8  9  8  5  8  5  9  7  8  6  8
##  [51]  5  9  9  8  6  9  9  7  4  8  8  8  6  4  8  6  9  7  5  9  8  8  9  9  9
##  [76]  7  5  5  9  6  7  6  8  8  7  8  7  9  5  9  9  9  7  8  8  9  9  9  7  8
## [101]  8  7  9  4  9  6  8  6  7  7  8  7  7  7  7  8  7  5  8  7  9  7  7  6  8
## [126]  8  8  9  7  8  9  8  8  9  8  6  6  8  9  5  7  9  6  9  9  9  6  8  9  8
## [151]  8  9  9  9  7  8  6  9  9  9  7  8  5  8  9  6  9  6  8  5  7  7  4  9  8
## [176]  9  9  9  5  9  7  6  9  9  9  7  5  8  9  7  9  8  9  6  6  8  9  5  6  6
## [201]  9  7  9  8  5  7  6  9  7  9  9  8  9  7  9  4  9  5  8  9  8  3  9  8  6
## [226]  9  8  8  7  6  8  9  4  7  8  8  9  6  8  6  8  9  8  7  9  8  7  9  8  9
## [251]  6  8  9  8  9  9  8  7  5  7  8  9  9  6  8  7  9  7  7  5  9  9  8  8  9
## [276]  6  7  5  9  5  7  6  8  7  8  4  8  5  8  7  7  9  9  8  9  6  8  9  4  6
## [301]  7  9  8  6  8  7  5  8  7 11 10 14 11 11 12 10 11 10 14 13 14 12 12 10 13
## [326] 10 11 10 11 10 13 14 11 10 11 13 10 10 12 10 10 10 11 11 11 10 11 11 13 13
## [351] 11 11 14 11 10 10 10 14 13 10 14 10 11 13 12 13 10 13 11 14 11 13 11 11 10
## [376] 11 11 10 11 13 12 10 10 14 11 10 11 10 11 13 13 10 11 11 12 10 10 11 10 11
## [401] 14 13 12 11 11 11 14 12 10 12 11 10 11 13 10 10 11 13 10 11 10 13 11 10 11
## [426] 11 14 11 13 11 11 10 13 10 13 10 12 10 14 12 10 11 14 12 10 10 10 10 12 13
## [451] 11 12 11 12 11 11 12 12 13 11 12 10 12 13 10 12 10 12 10 11 10 12 14 10 10
## [476] 12 10 10 13 12 12 11 13 12 10 11 11 13 12 13 13 10 12 12 14 11 10 13 11 11
## [501] 13 12 10 10 12 13 11 10 11 11 11 11 11 14 12 13 13 10 12 10 10 12 11 12 11
## [526] 11 12 12 14 11 10 11 12 13 12 11 11 11 14 11 13 12 10 12 13 10 10 10 10 14
## [551] 12 11 11 12 14 14 10 11 11 10 10 12 12 11 12 10 12 13 10 12 10 13 12 10 12
## [576] 10 11 12 11 12 10 13 12 11 11 11 11 12 14 11 11 12 14 11 13 11 10 13 12 11
## [601] 13 14 10 11 11 15 15 18 19 19 16 17 15 15 15 15 15 19 18 16 17 16 15 15 15
## [626] 18 17 15 17 17 16 17 15 15 16 16 15 18 15 16 17 16 16 15 18 15 16 17 16 16
## [651] 15 18 16 15</code></pre>
<div id="select-helpers" class="section level3">
<h3><span class="header-section-number">3.4.1</span> <code>select</code> helpers</h3>
<p>Se muestran diferentes usos y resultados de usar <code>select</code> helpers para facilidad de seleccion de columnas que cumplan con ciertos criterios. A su vez, se ejemplifica el renombrar las columnas durante la seleccion o usando <code>rename</code> (nuevo_nombre = nombre_actual). Un operador especial es <code>everything()</code> que selecciona todo; esto es util cuando se quiere reordenar y poner una o varias columnas de primero y despues el resto sin tener que escribir todos los nombres.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(storms, name<span class="op">:</span>pressure) <span class="co"># columnas desde name hasta pressure</span></code></pre>
<pre><code>## # A tibble: 10,010 x 11
##    name   year month   day  hour   lat  long status      category  wind pressure
##    &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;ord&gt;    &lt;int&gt;    &lt;int&gt;
##  1 Amy    1975     6    27     0  27.5 -79   tropical d… -1          25     1013
##  2 Amy    1975     6    27     6  28.5 -79   tropical d… -1          25     1013
##  3 Amy    1975     6    27    12  29.5 -79   tropical d… -1          25     1013
##  4 Amy    1975     6    27    18  30.5 -79   tropical d… -1          25     1013
##  5 Amy    1975     6    28     0  31.5 -78.8 tropical d… -1          25     1012
##  6 Amy    1975     6    28     6  32.4 -78.7 tropical d… -1          25     1012
##  7 Amy    1975     6    28    12  33.3 -78   tropical d… -1          25     1011
##  8 Amy    1975     6    28    18  34   -77   tropical d… -1          30     1006
##  9 Amy    1975     6    29     0  34.4 -75.8 tropical s… 0           35     1004
## 10 Amy    1975     6    29     6  34   -74.8 tropical s… 0           40     1002
## # … with 10,000 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">storms <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(name, pressure)) <span class="co"># columnas menos name y pressure</span></code></pre>
<pre><code>## # A tibble: 10,010 x 11
##     year month   day  hour   lat  long status category  wind ts_diameter
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;ord&gt;    &lt;int&gt;       &lt;dbl&gt;
##  1  1975     6    27     0  27.5 -79   tropi… -1          25          NA
##  2  1975     6    27     6  28.5 -79   tropi… -1          25          NA
##  3  1975     6    27    12  29.5 -79   tropi… -1          25          NA
##  4  1975     6    27    18  30.5 -79   tropi… -1          25          NA
##  5  1975     6    28     0  31.5 -78.8 tropi… -1          25          NA
##  6  1975     6    28     6  32.4 -78.7 tropi… -1          25          NA
##  7  1975     6    28    12  33.3 -78   tropi… -1          25          NA
##  8  1975     6    28    18  34   -77   tropi… -1          30          NA
##  9  1975     6    29     0  34.4 -75.8 tropi… 0           35          NA
## 10  1975     6    29     6  34   -74.8 tropi… 0           40          NA
## # … with 10,000 more rows, and 1 more variable: hu_diameter &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;Sepal&quot;</span>)) <span class="co"># columnas que empiezan con &#39;Sepal&#39;</span></code></pre>
<pre><code>## # A tibble: 150 x 2
##    Sepal.Length Sepal.Width
##           &lt;dbl&gt;       &lt;dbl&gt;
##  1          5.1         3.5
##  2          4.9         3  
##  3          4.7         3.2
##  4          4.6         3.1
##  5          5           3.6
##  6          5.4         3.9
##  7          4.6         3.4
##  8          5           3.4
##  9          4.4         2.9
## 10          4.9         3.1
## # … with 140 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">ends_with</span>(<span class="st">&quot;Width&quot;</span>)) <span class="co"># columnas que terminan con &#39;Width&#39;</span></code></pre>
<pre><code>## # A tibble: 150 x 2
##    Sepal.Width Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;
##  1         3.5         0.2
##  2         3           0.2
##  3         3.2         0.2
##  4         3.1         0.2
##  5         3.6         0.2
##  6         3.9         0.4
##  7         3.4         0.3
##  8         3.4         0.2
##  9         2.9         0.2
## 10         3.1         0.1
## # … with 140 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">storms <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;d&quot;</span>)) <span class="co"># columnas que contienen &#39;d&#39;</span></code></pre>
<pre><code>## # A tibble: 10,010 x 4
##      day  wind ts_diameter hu_diameter
##    &lt;int&gt; &lt;int&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1    27    25          NA          NA
##  2    27    25          NA          NA
##  3    27    25          NA          NA
##  4    27    25          NA          NA
##  5    28    25          NA          NA
##  6    28    25          NA          NA
##  7    28    25          NA          NA
##  8    28    30          NA          NA
##  9    29    35          NA          NA
## 10    29    40          NA          NA
## # … with 10,000 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="dt">Especie =</span> Species, <span class="kw">everything</span>()) <span class="co"># renombrar seleccion y seleccionar el resto</span></code></pre>
<pre><code>## # A tibble: 150 x 5
##    Especie Sepal.Length Sepal.Width Petal.Length Petal.Width
##    &lt;fct&gt;          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
##  1 setosa           5.1         3.5          1.4         0.2
##  2 setosa           4.9         3            1.4         0.2
##  3 setosa           4.7         3.2          1.3         0.2
##  4 setosa           4.6         3.1          1.5         0.2
##  5 setosa           5           3.6          1.4         0.2
##  6 setosa           5.4         3.9          1.7         0.4
##  7 setosa           4.6         3.4          1.4         0.3
##  8 setosa           5           3.4          1.5         0.2
##  9 setosa           4.4         2.9          1.4         0.2
## 10 setosa           4.9         3.1          1.5         0.1
## # … with 140 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">Especie =</span> Species) <span class="co"># renombrar columna</span></code></pre>
<pre><code>## # A tibble: 150 x 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Especie
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
##  1          5.1         3.5          1.4         0.2 setosa 
##  2          4.9         3            1.4         0.2 setosa 
##  3          4.7         3.2          1.3         0.2 setosa 
##  4          4.6         3.1          1.5         0.2 setosa 
##  5          5           3.6          1.4         0.2 setosa 
##  6          5.4         3.9          1.7         0.4 setosa 
##  7          4.6         3.4          1.4         0.3 setosa 
##  8          5           3.4          1.5         0.2 setosa 
##  9          4.4         2.9          1.4         0.2 setosa 
## 10          4.9         3.1          1.5         0.1 setosa 
## # … with 140 more rows</code></pre>
</div>
</div>
<div id="filtrado-de-observaciones" class="section level2">
<h2><span class="header-section-number">3.5</span> Filtrado de observaciones</h2>
<p>Para filtrar observaciones de acuerdo a uno a varios criterios se usa la funcion <code>filter</code>, asi como operadores logicos y funciones auxiliares.</p>
<p>Funciones que ayudan a filtrar observaciones son las mismas de los <a href="avanzado.html#operadores-logicos">Operadores logicos</a>.</p>
<p>Dos de las funciones auxiliares mas utiles son:</p>
<ul>
<li><code>between(x,left,right)</code> que filtra observaciones para la variable <code>x</code> que se encuentren entre <code>left</code> (limite inferior) y <code>right</code> (limite superior); esta es mas util para variables numericas,</li>
<li><code>x %in% c(a,b,c)</code> que filtra observaciones para la variable <code>x</code> que se encuentren en el vector <code>c(a,b,c)</code>; esta es mas util para variables de texto o factor</li>
</ul>
<p>Se muestran diferentes ejemplos de como filtrar observaciones. Cuando se requiere que una observacion cumpla varios criterios, estas condiciones se pueden separar por medio de comas (<code>,</code>), que es lo mismo que usar el operador logico <code>&amp;</code>. Si se requiere una u otra condicion se puede usar el operador logico <code>|</code>, pero en ese caso y dependiendo de lo deseado es mejor usar <code>between()</code> o <code>%in%</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(airquality,Temp <span class="op">&gt;</span><span class="st"> </span><span class="dv">85</span>)</code></pre>
<pre><code>## # A tibble: 34 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    NA     273   6.9    87     6     8
##  2    71     291  13.8    90     6     9
##  3    39     323  11.5    87     6    10
##  4    NA     259  10.9    93     6    11
##  5    NA     250   9.2    92     6    12
##  6    77     276   5.1    88     7     7
##  7    97     267   6.3    92     7     8
##  8    97     272   5.7    92     7     9
##  9    85     175   7.4    89     7    10
## 10    NA     291  14.9    91     7    14
## # … with 24 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Temp <span class="op">&gt;</span><span class="st"> </span><span class="dv">85</span>)</code></pre>
<pre><code>## # A tibble: 34 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    NA     273   6.9    87     6     8
##  2    71     291  13.8    90     6     9
##  3    39     323  11.5    87     6    10
##  4    NA     259  10.9    93     6    11
##  5    NA     250   9.2    92     6    12
##  6    77     276   5.1    88     7     7
##  7    97     267   6.3    92     7     8
##  8    97     272   5.7    92     7     9
##  9    85     175   7.4    89     7    10
## 10    NA     291  14.9    91     7    14
## # … with 24 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Temp <span class="op">&gt;</span><span class="st"> </span><span class="dv">75</span>, Wind <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>)</code></pre>
<pre><code>## # A tibble: 38 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    45     252  14.9    81     5    29
##  2    NA     264  14.3    79     6     6
##  3    71     291  13.8    90     6     9
##  4    39     323  11.5    87     6    10
##  5    NA     259  10.9    93     6    11
##  6    NA     332  13.8    80     6    14
##  7    NA     322  11.5    79     6    15
##  8    21     191  14.9    77     6    16
##  9    13     137  10.3    76     6    20
## 10    NA      98  11.5    80     6    28
## # … with 28 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(Temp, <span class="dv">70</span>, <span class="dv">80</span>))</code></pre>
<pre><code>## # A tibble: 53 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    36     118   8      72     5     2
##  2    12     149  12.6    74     5     3
##  3     7      NA   6.9    74     5    11
##  4    11     320  16.6    73     5    22
##  5   115     223   5.7    79     5    30
##  6    37     279   7.4    76     5    31
##  7    NA     286   8.6    78     6     1
##  8    NA     287   9.7    74     6     2
##  9    NA     264  14.3    79     6     6
## 10    NA     332  13.8    80     6    14
## # … with 43 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(Temp <span class="op">&gt;</span><span class="st"> </span><span class="dv">75</span>, Wind <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(Ozone,Solar.R)</code></pre>
<pre><code>## # A tibble: 38 x 2
##    Ozone Solar.R
##    &lt;int&gt;   &lt;int&gt;
##  1    45     252
##  2    NA     264
##  3    71     291
##  4    39     323
##  5    NA     259
##  6    NA     332
##  7    NA     322
##  8    21     191
##  9    13     137
## 10    NA      98
## # … with 28 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">babynames <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Acura&quot;</span>, <span class="st">&quot;Lexus&quot;</span>, <span class="st">&quot;Yugo&quot;</span>))</code></pre>
<pre><code>## # A tibble: 57 x 5
##     year sex   name      n       prop
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;      &lt;dbl&gt;
##  1  1990 F     Lexus    36 0.0000175 
##  2  1990 M     Lexus    12 0.00000558
##  3  1991 F     Lexus   102 0.0000502 
##  4  1991 M     Lexus    16 0.00000755
##  5  1992 F     Lexus   193 0.0000963 
##  6  1992 M     Lexus    25 0.0000119 
##  7  1993 F     Lexus   285 0.000145  
##  8  1993 M     Lexus    30 0.0000145 
##  9  1994 F     Lexus   381 0.000195  
## 10  1994 F     Acura     6 0.00000308
## # … with 47 more rows</code></pre>
</div>
<div id="orden-de-acuerdo-a-variables" class="section level2">
<h2><span class="header-section-number">3.6</span> Orden de acuerdo a variables</h2>
<p><code>arrange</code> se usa para ordenar los datos de acuerdo a una o mas variables, donde por defecto lo hace de manera ascendente, para ordenarlos de manera descendente se encierra la variable dentro de <code>desc(var)</code>. Si se ordena por una variable numerica se hara de menor a mayor o viceversa, si se ordena por una variable factor se hara de acuerdo al orden de los niveles del factor, y si se ordena por una variable de texto se hara por orden alfabetico.</p>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(Temp)</code></pre>
<pre><code>## # A tibble: 153 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    NA      NA  14.3    56     5     5
##  2     6      78  18.4    57     5    18
##  3    NA      66  16.6    57     5    25
##  4    NA      NA   8      57     5    27
##  5    18      65  13.2    58     5    15
##  6    NA     266  14.9    58     5    26
##  7    19      99  13.8    59     5     8
##  8     1       8   9.7    59     5    21
##  9     8      19  20.1    61     5     9
## 10     4      25   9.7    61     5    23
## # … with 143 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Temp))</code></pre>
<pre><code>## # A tibble: 153 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    76     203   9.7    97     8    28
##  2    84     237   6.3    96     8    30
##  3   118     225   2.3    94     8    29
##  4    85     188   6.3    94     8    31
##  5    NA     259  10.9    93     6    11
##  6    73     183   2.8    93     9     3
##  7    91     189   4.6    93     9     4
##  8    NA     250   9.2    92     6    12
##  9    97     267   6.3    92     7     8
## 10    97     272   5.7    92     7     9
## # … with 143 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">gss_cat <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(marital)</code></pre>
<pre><code>## # A tibble: 21,483 x 9
##     year marital    age race  rincome     partyid      relig   denom     tvhours
##    &lt;int&gt; &lt;fct&gt;    &lt;int&gt; &lt;fct&gt; &lt;fct&gt;       &lt;fct&gt;        &lt;fct&gt;   &lt;fct&gt;       &lt;int&gt;
##  1  2000 No answ…    28 Other $10000 - 1… Ind,near dem Buddhi… Not appl…       2
##  2  2006 No answ…    NA White Not applic… Strong repu… Protes… Other          NA
##  3  2006 No answ…    NA White No answer   Strong repu… None    Not appl…       2
##  4  2006 No answ…    63 White No answer   Strong demo… None    Not appl…      NA
##  5  2006 No answ…    40 Other $20000 - 2… Not str dem… Protes… No denom…      NA
##  6  2006 No answ…    45 White No answer   No answer    No ans… No answer      NA
##  7  2006 No answ…    NA White No answer   No answer    No ans… No answer      NA
##  8  2008 No answ…    62 White Not applic… Strong demo… Protes… Episcopal      NA
##  9  2008 No answ…    43 White No answer   Independent  Christ… No denom…       1
## 10  2008 No answ…    50 White No answer   Ind,near dem Protes… Other           4
## # … with 21,473 more rows</code></pre>
</div>
<div id="creacion-de-variables" class="section level2">
<h2><span class="header-section-number">3.7</span> Creacion de variables</h2>
<p>Para crear o modificar variables se usa <code>mutate</code>. Algunas veces se requiere o desea categorizar una variable continua de acuerdo a ciertos criterios o puntos de quiebre; lo anterior puede realizarse por medio de lo que se conoce como <em>if statements</em>, donde una funcion que realiza la misma tarea pero de forma mas eficiente es <code>case_when</code>.</p>
<p>En el primer ejemplo se trabaja con la tabla del <code>titanic</code>, donde se tienen varias variables como texto (‘Pclass’, ‘Survived’, ‘Sex’) y se quieren convertir a factor, por lo que simplemente se re-definen estas variables. Este cambio se puede ver con <code>glimpse</code> para el antes y despues, donde el tipo de variable cambia.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(titanic)</code></pre>
<pre><code>## Observations: 891
## Variables: 12
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, …
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, …
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (F…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;ma…
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14,…
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, …
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, …
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;3…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625…
## $ Cabin       &lt;chr&gt; &quot;&quot;, &quot;C85&quot;, &quot;&quot;, &quot;C123&quot;, &quot;&quot;, &quot;&quot;, &quot;E46&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;G6&quot;, &quot;…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;Q&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S…</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">titanic =<span class="st"> </span>titanic <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Pclass =</span> <span class="kw">as_factor</span>(Pclass),
         <span class="dt">Survived =</span> <span class="kw">as_factor</span>(Survived),
         <span class="dt">Sex =</span> <span class="kw">as_factor</span>(Sex))
<span class="kw">glimpse</span>(titanic)</code></pre>
<pre><code>## Observations: 891
## Variables: 12
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…
## $ Survived    &lt;fct&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, …
## $ Pclass      &lt;fct&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, …
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (F…
## $ Sex         &lt;fct&gt; male, female, female, female, male, male, male, male, fem…
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14,…
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, …
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, …
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;3…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625…
## $ Cabin       &lt;chr&gt; &quot;&quot;, &quot;C85&quot;, &quot;&quot;, &quot;C123&quot;, &quot;&quot;, &quot;&quot;, &quot;E46&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;G6&quot;, &quot;…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;Q&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S…</code></pre>
<p>Se pueden crear variables nuevas que dependen de otra en la tabla. En el ejemplo se calcula la altura en centimetros a partir de la altura en pulgadas (1 pulgada = 2.54 cm)</p>
<pre class="sourceCode r"><code class="sourceCode r">dat1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Altura =</span> Height<span class="op">*</span><span class="fl">2.54</span>)</code></pre>
<pre><code>## # A tibble: 654 x 6
##      Age LungCap Height Gender Smoke Altura
##    &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;
##  1     9    3.12   57   female no      145.
##  2     8    3.17   67.5 female no      171.
##  3     7    3.16   54.5 female no      138.
##  4     9    2.67   53   male   no      135.
##  5     9    3.68   57   male   no      145.
##  6     8    5.01   61   female no      155.
##  7     6    3.76   58   female no      147.
##  8     6    2.24   56   female no      142.
##  9     8    3.96   58.5 female no      149.
## 10     9    3.83   60   female no      152.
## # … with 644 more rows</code></pre>
<p>En el tercer ejemplo se re define la variable ‘Month’ pasandola a factor donde se le cambian las etiquetas a algo mas explicito. A su vez, se define una nueva variable condicionada en los valores de otra (sensacion dependiendo del valor de la temperatura). Aqui se ejemplifica <code>case_when</code>, donde la estructura es:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">case_when</span>(condicion1 <span class="op">~</span><span class="st"> </span>resultado1,
          condicion2 <span class="op">~</span><span class="st"> </span>resultado2,
          T <span class="op">~</span><span class="st"> </span>resultado3)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airq =<span class="st"> </span>airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Month =</span> <span class="kw">factor</span>(Month,
                        <span class="dt">levels =</span> <span class="dv">5</span><span class="op">:</span><span class="dv">9</span>,
                        <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Mayo&quot;</span>, <span class="st">&quot;Junio&quot;</span>, <span class="st">&quot;Julio&quot;</span>, 
                                   <span class="st">&quot;Agosto&quot;</span>, <span class="st">&quot;Setiembre&quot;</span>)),
         <span class="dt">Sensation =</span> <span class="kw">case_when</span>(Temp <span class="op">&lt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">~</span><span class="st"> &#39;Cold&#39;</span>,
                               Temp <span class="op">&lt;</span><span class="st"> </span><span class="dv">70</span> <span class="op">~</span><span class="st"> &#39;Cool&#39;</span>,
                               Temp <span class="op">&lt;</span><span class="st"> </span><span class="dv">85</span> <span class="op">~</span><span class="st"> &#39;Warm&#39;</span>,
                               T <span class="op">~</span><span class="st"> &#39;Hot&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">           </span><span class="kw">as.factor</span>())
airq</code></pre>
<pre><code>## # A tibble: 153 x 7
##    Ozone Solar.R  Wind  Temp Month   Day Sensation
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;fct&gt; &lt;int&gt; &lt;fct&gt;    
##  1    41     190   7.4    67 Mayo      1 Cool     
##  2    36     118   8      72 Mayo      2 Warm     
##  3    12     149  12.6    74 Mayo      3 Warm     
##  4    18     313  11.5    62 Mayo      4 Cool     
##  5    NA      NA  14.3    56 Mayo      5 Cold     
##  6    28      NA  14.9    66 Mayo      6 Cool     
##  7    23     299   8.6    65 Mayo      7 Cool     
##  8    19      99  13.8    59 Mayo      8 Cold     
##  9     8      19  20.1    61 Mayo      9 Cool     
## 10    NA     194   8.6    69 Mayo     10 Cool     
## # … with 143 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airquality <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">as_tibble</span>()</code></pre>
<pre><code>## # A tibble: 153 x 6
##    Ozone Solar.R  Wind  Temp Month   Day
##    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1    41     190   7.4    67     5     1
##  2    36     118   8      72     5     2
##  3    12     149  12.6    74     5     3
##  4    18     313  11.5    62     5     4
##  5    NA      NA  14.3    56     5     5
##  6    28      NA  14.9    66     5     6
##  7    23     299   8.6    65     5     7
##  8    19      99  13.8    59     5     8
##  9     8      19  20.1    61     5     9
## 10    NA     194   8.6    69     5    10
## # … with 143 more rows</code></pre>
</div>
<div id="conteo-de-variables-cualitativas" class="section level2">
<h2><span class="header-section-number">3.8</span> Conteo de variables cualitativas</h2>
<p>Para contar casos de variables discretas de una manera mas expedita se puede usar <code>count</code>. Esta funcion realiza un agrupamiento (<code>group_by</code>) y resumen (<code>summarise</code>) a la vez.</p>
<pre class="sourceCode r"><code class="sourceCode r">mpg <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(manufacturer, year)</code></pre>
<pre><code>## # A tibble: 30 x 3
##    manufacturer  year     n
##    &lt;chr&gt;        &lt;int&gt; &lt;int&gt;
##  1 audi          1999     9
##  2 audi          2008     9
##  3 chevrolet     1999     7
##  4 chevrolet     2008    12
##  5 dodge         1999    16
##  6 dodge         2008    21
##  7 ford          1999    15
##  8 ford          2008    10
##  9 honda         1999     5
## 10 honda         2008     4
## # … with 20 more rows</code></pre>
</div>
<div id="tabla-interactiva" class="section level2">
<h2><span class="header-section-number">3.9</span> Tabla interactiva</h2>
<p>Este es un ejemplo de como convertir una tabla estatica a interactiva. Se usa el paquete <em>DT</em> <span class="citation">(Xie, Cheng, &amp; Tan, <a href="#ref-R-DT">2019</a>)</span> y la funcion <code>datatable</code>, donde se pueden definir otra serie de argumentos. Tiene la ventaja de que para columnas numericas puedo filtrar por medio de sliders, y para columnas de facto puedo seleccionar los niveles.</p>
<pre class="sourceCode r"><code class="sourceCode r">airq <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>DT<span class="op">::</span><span class="kw">datatable</span>(<span class="dt">filter =</span> <span class="st">&#39;top&#39;</span>, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">dom =</span> <span class="st">&#39;t&#39;</span>))</code></pre>
<div id="htmlwidget-02f5ad6ebb63455381dc" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-02f5ad6ebb63455381dc">{"x":{"filter":"top","filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"168\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"7\" data-max=\"334\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1.7\" data-max=\"20.7\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"56\" data-max=\"97\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Mayo&quot;,&quot;Junio&quot;,&quot;Julio&quot;,&quot;Agosto&quot;,&quot;Setiembre&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"31\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Cold&quot;,&quot;Cool&quot;,&quot;Hot&quot;,&quot;Warm&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153"],[41,36,12,18,null,28,23,19,8,null,7,16,11,14,18,14,34,6,30,11,1,11,4,32,null,null,null,23,45,115,37,null,null,null,null,null,null,29,null,71,39,null,null,23,null,null,21,37,20,12,13,null,null,null,null,null,null,null,null,null,null,135,49,32,null,64,40,77,97,97,85,null,10,27,null,7,48,35,61,79,63,16,null,null,80,108,20,52,82,50,64,59,39,9,16,78,35,66,122,89,110,null,null,44,28,65,null,22,59,23,31,44,21,9,null,45,168,73,null,76,118,84,85,96,78,73,91,47,32,20,23,21,24,44,21,28,9,13,46,18,13,24,16,13,23,36,7,14,30,null,14,18,20],[190,118,149,313,null,null,299,99,19,194,null,256,290,274,65,334,307,78,322,44,8,320,25,92,66,266,null,13,252,223,279,286,287,242,186,220,264,127,273,291,323,259,250,148,332,322,191,284,37,120,137,150,59,91,250,135,127,47,98,31,138,269,248,236,101,175,314,276,267,272,175,139,264,175,291,48,260,274,285,187,220,7,258,295,294,223,81,82,213,275,253,254,83,24,77,null,null,null,255,229,207,222,137,192,273,157,64,71,51,115,244,190,259,36,255,212,238,215,153,203,225,237,188,167,197,183,189,95,92,252,220,230,259,236,259,238,24,112,237,224,27,238,201,238,14,139,49,20,193,145,191,131,223],[7.4,8,12.6,11.5,14.3,14.9,8.6,13.8,20.1,8.6,6.9,9.7,9.2,10.9,13.2,11.5,12,18.4,11.5,9.7,9.7,16.6,9.7,12,16.6,14.9,8,12,14.9,5.7,7.4,8.6,9.7,16.1,9.2,8.6,14.3,9.7,6.9,13.8,11.5,10.9,9.2,8,13.8,11.5,14.9,20.7,9.2,11.5,10.3,6.3,1.7,4.6,6.3,8,8,10.3,11.5,14.9,8,4.1,9.2,9.2,10.9,4.6,10.9,5.1,6.3,5.7,7.4,8.6,14.3,14.9,14.9,14.3,6.9,10.3,6.3,5.1,11.5,6.9,9.7,11.5,8.6,8,8.6,12,7.4,7.4,7.4,9.2,6.9,13.8,7.4,6.9,7.4,4.6,4,10.3,8,8.6,11.5,11.5,11.5,9.7,11.5,10.3,6.3,7.4,10.9,10.3,15.5,14.3,12.6,9.7,3.4,8,5.7,9.7,2.3,6.3,6.3,6.9,5.1,2.8,4.6,7.4,15.5,10.9,10.3,10.9,9.7,14.9,15.5,6.3,10.9,11.5,6.9,13.8,10.3,10.3,8,12.6,9.2,10.3,10.3,16.6,6.9,13.2,14.3,8,11.5],[67,72,74,62,56,66,65,59,61,69,74,69,66,68,58,64,66,57,68,62,59,73,61,61,57,58,57,67,81,79,76,78,74,67,84,85,79,82,87,90,87,93,92,82,80,79,77,72,65,73,76,77,76,76,76,75,78,73,80,77,83,84,85,81,84,83,83,88,92,92,89,82,73,81,91,80,81,82,84,87,85,74,81,82,86,85,82,86,88,86,83,81,81,81,82,86,85,87,89,90,90,92,86,86,82,80,79,77,79,76,78,78,77,72,75,79,81,86,88,97,94,96,94,91,92,93,93,87,84,80,78,75,73,81,76,77,71,71,78,67,76,68,82,64,71,81,69,63,70,77,75,76,68],["Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Mayo","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Junio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Julio","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Agosto","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre","Setiembre"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],["Cool","Warm","Warm","Cool","Cold","Cool","Cool","Cold","Cool","Cool","Warm","Cool","Cool","Cool","Cold","Cool","Cool","Cold","Cool","Cool","Cold","Warm","Cool","Cool","Cold","Cold","Cold","Cool","Warm","Warm","Warm","Warm","Warm","Cool","Warm","Hot","Warm","Warm","Hot","Hot","Hot","Hot","Hot","Warm","Warm","Warm","Warm","Warm","Cool","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Hot","Warm","Warm","Warm","Warm","Hot","Hot","Hot","Hot","Warm","Warm","Warm","Hot","Warm","Warm","Warm","Warm","Hot","Hot","Warm","Warm","Warm","Hot","Hot","Warm","Hot","Hot","Hot","Warm","Warm","Warm","Warm","Warm","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Hot","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Warm","Cool","Warm","Cool","Warm","Cool","Warm","Warm","Cool","Cool","Warm","Warm","Warm","Warm","Cool"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Ozone<\/th>\n      <th>Solar.R<\/th>\n      <th>Wind<\/th>\n      <th>Temp<\/th>\n      <th>Month<\/th>\n      <th>Day<\/th>\n      <th>Sensation<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"t","columnDefs":[{"className":"dt-right","targets":[1,2,3,4,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="datos-relacionales" class="section level2">
<h2><span class="header-section-number">3.10</span> Datos relacionales</h2>
<p>En caso de tener datos de observaciones en diferentes tablas, estas se pueden unir para juntar los datos en una unica tabla (uniones de transformacion), o relacionar para filtrar los datos de una tabla con respecto a otra (uniones de filtro).</p>
<p>De manera general las uniones se van a realizar de acuerdo a las columnas que tengan el mismo nombre en ambas tablas. Si se desea especificar una columna en especifico se usa el argumento <code>by = 'col'</code>. Si el nombre difiere entre las tablas se define la union de acuerdo a <code>by = c('a' = 'b')</code>, donde <code>'a'</code> corresponde con el nombre de la columna en la primer tabla, y <code>'b'</code> corresponde con el nombre de la columna en la segunda tabla. Esto aplica para todas las funciones de union (<code>*_join</code>).</p>
<div id="uniones-de-transformacion" class="section level3">
<h3><span class="header-section-number">3.10.1</span> Uniones de transformacion</h3>
<p>Estas uniones agregan columnas de una tabla a otra.</p>
<p>Un tipo de union es <code>left_join(x, y)</code>, donde se unen los datos de la tabla de la derecha (<code>y</code>) a la de la izquierda (<code>x</code>) de acuerdo a una columna en comun, y manteniendo todas las observaciones de <code>x</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(airlines)</code></pre>
<pre><code>## Joining, by = &quot;carrier&quot;</code></pre>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # … with 336,766 more rows, and 12 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   name &lt;chr&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(airports, <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))</code></pre>
<pre><code>## # A tibble: 336,776 x 26
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # … with 336,766 more rows, and 18 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   name &lt;chr&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;, alt &lt;int&gt;, tz &lt;dbl&gt;, dst &lt;chr&gt;,
## #   tzone &lt;chr&gt;</code></pre>
<p>Otro tipo de union es <code>inner_join(x, y)</code>, donde se mantienen observaciones que se encuentran en ambas tablas.</p>
<pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">y =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">1</span>)
df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="dt">a =</span> <span class="dv">10</span>, <span class="dt">b =</span> <span class="st">&quot;a&quot;</span>)

df1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(df2)</code></pre>
<pre><code>## Joining, by = &quot;x&quot;</code></pre>
<pre><code>## # A tibble: 1 x 4
##       x     y     a b    
##   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;
## 1     1     2    10 a</code></pre>
<p>Otro tripo de union es <code>full_join(x, y)</code>, donde se mantienen todas las observaciones de ambas tablas.</p>
<pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">full_join</span>(df2)</code></pre>
<pre><code>## Joining, by = &quot;x&quot;</code></pre>
<pre><code>## # A tibble: 3 x 4
##       x     y     a b    
##   &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;
## 1     1     2    10 a    
## 2     2     1    NA &lt;NA&gt; 
## 3     3    NA    10 a</code></pre>
</div>
<div id="uniones-de-filtro" class="section level3">
<h3><span class="header-section-number">3.10.2</span> Uniones de filtro</h3>
<p>Se filtran las observaciones de una tabla de acuerdo a si coniciden o no con las de otra tabla.</p>
<p>Un tipo es <code>semi_join(x, y)</code>, donde se mantienen todas las observaciones de <code>x</code> que coinciden con observaciones en <code>y</code>, pero sin agregar columnas de <code>y</code>. El opuesto seria <code>anti_join(x, y)</code>, donde se eliminan todas las observaciones de <code>x</code> que coinciden con observaciones en <code>y</code>, pero sin agregar columnas de <code>y</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)
df2 &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;a&quot;</span>))

df1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">semi_join</span>(df2)</code></pre>
<pre><code>## Joining, by = &quot;x&quot;</code></pre>
<pre><code>## # A tibble: 2 x 2
##       x     y
##   &lt;dbl&gt; &lt;int&gt;
## 1     1     1
## 2     1     2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">df1 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">anti_join</span>(df2)</code></pre>
<pre><code>## Joining, by = &quot;x&quot;</code></pre>
<pre><code>## # A tibble: 2 x 2
##       x     y
##   &lt;dbl&gt; &lt;int&gt;
## 1     3     3
## 2     4     4</code></pre>
</div>
</div>
<div id="datos-ordenados-tidy-data" class="section level2">
<h2><span class="header-section-number">3.11</span> Datos ordenados (Tidy data)</h2>
<div id="formatos-largo-y-ancho" class="section level3">
<h3><span class="header-section-number">3.11.1</span> Formatos largo y ancho</h3>
<p>Los datos ordenados corresponden con cada variable en su columna, cada fila corresponde con una observacion, y en las celdas van los valores correspondientes. Esto corresponde con un formato largo (Figura <a href="avanzado.html#fig:tidy-data">3.1</a>).</p>

<div class="figure"><span id="fig:tidy-data"></span>
<img src="imgs/tidy-data.png" alt="Estructura e ideologia de datos ordenados (Grolemund &amp; Wickham, 2016)." width="960" />
<p class="caption">
Figura 3.1: Estructura e ideologia de datos ordenados <span class="citation">(Grolemund &amp; Wickham, <a href="#ref-grolemund2016">2016</a>)</span>.
</p>
</div>
<p>El ejemplo que se muestra acontinuacion no esta ordenado. La tabla tiene 3 variables pero no definidas correctamente. Una variable seria el pais, otra seria el anho (las columnas), y la tercera seria el numero de casos (las celdas). Esto se conoce como datos en formato ancho (En algunos casos puede ser necesario este formato, pero en la mayoria de ocasiones se prefiere el formato largo).</p>
<pre class="sourceCode r"><code class="sourceCode r">casos &lt;-<span class="st"> </span><span class="kw">tribble</span>(
  <span class="op">~</span>pais, <span class="op">~</span><span class="st">&quot;2011&quot;</span>, <span class="op">~</span><span class="st">&quot;2012&quot;</span>, <span class="op">~</span><span class="st">&quot;2013&quot;</span>,
   <span class="st">&quot;FR&quot;</span>,    <span class="dv">7000</span>,    <span class="dv">6900</span>,    <span class="dv">7000</span>,
   <span class="st">&quot;DE&quot;</span>,    <span class="dv">5800</span>,    <span class="dv">6000</span>,    <span class="dv">6200</span>,
   <span class="st">&quot;US&quot;</span>,   <span class="dv">15000</span>,   <span class="dv">14000</span>,   <span class="dv">13000</span>
)</code></pre>
<p>Para pasar de un formato ancho a largo, se usa la funcion <code>pivot_longer(cols, names_to, values_to)</code>, donde <code>cols</code> son las columnas a agrupar en una sola, <code>names_to</code> es el nombre que se le va a dar a la columna que va a contener las columnas a agrupar, y <code>values_to</code> es el nombre que se le va a dar a la columna que va a contener los valores de las celdas y que corresponden con una variable.</p>
<p>En este caso se van a agrupar todas las columnas menos el pais, se le va a llamar ‘anho’ y lo que estaba en las celdas pasa a ser la columna ‘casos’.</p>
<pre class="sourceCode r"><code class="sourceCode r">casos_tidy =<span class="st"> </span>casos <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="op">-</span>pais, <span class="dt">names_to =</span> <span class="st">&#39;anho&#39;</span>, <span class="dt">values_to =</span> <span class="st">&#39;casos&#39;</span>)
casos_tidy</code></pre>
<pre><code>## # A tibble: 9 x 3
##   pais  anho  casos
##   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
## 1 FR    2011   7000
## 2 FR    2012   6900
## 3 FR    2013   7000
## 4 DE    2011   5800
## 5 DE    2012   6000
## 6 DE    2013   6200
## 7 US    2011  15000
## 8 US    2012  14000
## 9 US    2013  13000</code></pre>
<p>De igual manera se puede volver al formato ancho con <code>pivot_wider(id_cols, names_from, values_from)</code>, donde <code>id_cols</code> es una columna que identifica a cada observacion, <code>names_from</code> es la columna a usar para nuevas columnas, y <code>values_from</code> es la columna donde estan los valores a poner en las celdas.</p>
<pre class="sourceCode r"><code class="sourceCode r">casos_tidy <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">id_cols =</span> pais, <span class="dt">names_from =</span> anho, <span class="dt">values_from =</span> casos)</code></pre>
<pre><code>## # A tibble: 3 x 4
##   pais  `2011` `2012` `2013`
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 FR      7000   6900   7000
## 2 DE      5800   6000   6200
## 3 US     15000  14000  13000</code></pre>
</div>
<div id="separar-y-unir" class="section level3">
<h3><span class="header-section-number">3.11.2</span> Separar y unir</h3>
<p>Otro caso de datos no ordenados es cuando una columna contiene 2 o mas datos, por lo que es necesario separar cada dato en un su propia columna.</p>
<p>En el ejemplo la columna ‘tasa’ corresponde con ‘casos’ y ‘poblacion’, por lo que hay que separarla. La funcion <code>separate</code> tiene el argumento <code>into</code> que corresponde con un vector de texto donse se deben definir los nombres de las columnas resultantes.</p>
<pre class="sourceCode r"><code class="sourceCode r">casos2 &lt;-<span class="st"> </span><span class="kw">tribble</span>(
          <span class="op">~</span>pais, <span class="op">~</span>anho,               <span class="op">~</span>tasa,
  <span class="st">&quot;Afghanistan&quot;</span>,  <span class="dv">2001</span>,      <span class="st">&#39;745/19987071&#39;</span>,
       <span class="st">&quot;Brasil&quot;</span>,  <span class="dv">2001</span>,   <span class="st">&#39;37737/172006362&#39;</span>,
        <span class="st">&quot;China&quot;</span>,  <span class="dv">2001</span>, <span class="st">&#39;212258/1272915272&#39;</span>
)</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">casos2 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(tasa, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&#39;casos&#39;</span>, <span class="st">&#39;poblacion&#39;</span>))</code></pre>
<pre><code>## # A tibble: 3 x 4
##   pais         anho casos  poblacion 
##   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  2001 745    19987071  
## 2 Brasil       2001 37737  172006362 
## 3 China        2001 212258 1272915272</code></pre>
<p>Por defecto <code>separate</code> va a separar la columna en cualquier caracter especial que encuentre. Si se quiere especificar se puede usar el argumento <code>sep</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">casos2 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(tasa, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&#39;casos&#39;</span>, <span class="st">&#39;poblacion&#39;</span>), <span class="dt">sep =</span> <span class="st">&#39;/&#39;</span>)</code></pre>
<pre><code>## # A tibble: 3 x 4
##   pais         anho casos  poblacion 
##   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  2001 745    19987071  
## 2 Brasil       2001 37737  172006362 
## 3 China        2001 212258 1272915272</code></pre>
<p>El tipo de columna resultante de <code>separate</code> es de texto, pero en algunos casos ese no es el tipo deseado, por lo que se le puede pedir a la funcion que trate de adivinar y convertir las columnas al tipo correcto por medio del argumento <code>convert = TRUE</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">casos2_sep =<span class="st"> </span>casos2 <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">separate</span>(tasa, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&#39;casos&#39;</span>, <span class="st">&#39;poblacion&#39;</span>), <span class="dt">convert =</span> T)
casos2_sep</code></pre>
<pre><code>## # A tibble: 3 x 4
##   pais         anho  casos  poblacion
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;
## 1 Afghanistan  2001    745   19987071
## 2 Brasil       2001  37737  172006362
## 3 China        2001 212258 1272915272</code></pre>
<p>El unir columnas se hace por medio de <code>unite</code>, donde se le pasan, primero, el nombre de la nueva columna, y segundo los nombres de las columnas a unir, asi como el caracter a usar para separar los datos.</p>
<pre class="sourceCode r"><code class="sourceCode r">casos2_sep <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">unite</span>(tasa, casos, poblacion, <span class="dt">sep =</span> <span class="st">&#39;-&#39;</span>)</code></pre>
<pre><code>## # A tibble: 3 x 3
##   pais         anho tasa             
##   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
## 1 Afghanistan  2001 745-19987071     
## 2 Brasil       2001 37737-172006362  
## 3 China        2001 212258-1272915272</code></pre>
</div>
</div>
<div id="nest" class="section level2">
<h2><span class="header-section-number">3.12</span> Datos anidados (Nesting)</h2>
<p>Esta es una de las ventajas de los tibbles, donde una columna puede ser una lista, y como una lista puede contener lo que sea, esto permite felxibilidad en el analisis y manipulacion de dtos, como se va a ver en el proximo capitulo.</p>
<p>Esto es muy usado junto con <code>group_by</code>, donde primero se agrupa la tabla y luego se crea una columna donde para cada grupo se va a tener su tabla unica (las observaciones que corresponden con ese grupo) y diferente al resto.</p>
<pre class="sourceCode r"><code class="sourceCode r">iris <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Species) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">nest</span>()</code></pre>
<pre><code>## # A tibble: 3 x 2
##   Species    data             
##   &lt;fct&gt;      &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 4]&gt;
## 2 versicolor &lt;tibble [50 × 4]&gt;
## 3 virginica  &lt;tibble [50 × 4]&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">airq <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(Month) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">nest</span>()</code></pre>
<pre><code>## # A tibble: 5 x 2
##   Month     data             
##   &lt;fct&gt;     &lt;list&gt;           
## 1 Mayo      &lt;tibble [31 × 6]&gt;
## 2 Junio     &lt;tibble [30 × 6]&gt;
## 3 Julio     &lt;tibble [31 × 6]&gt;
## 4 Agosto    &lt;tibble [31 × 6]&gt;
## 5 Setiembre &lt;tibble [30 × 6]&gt;</code></pre>

</div>
</div>
<h3>Referencias</h3>
<div id="refs" class="references">
<div id="ref-grolemund2016">
<p>Grolemund, G., &amp; Wickham, H. (2016). <em>R for Data Science</em>. O’Reilly. Recuperado a partir de <a href="https://bookdown.org/roy_schumacher/r4ds/">https://bookdown.org/roy_schumacher/r4ds/</a></p>
</div>
<div id="ref-tidyverse2019">
<p>Wickham, H., Averick, M., Bryan, J., Chang, W., McGowan, L. D., François, R., … Yutani, H. (2019). Welcome to the tidyverse. <em>Journal of Open Source Software</em>, <em>4</em>(43), 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a></p>
</div>
<div id="ref-R-DT">
<p>Xie, Y., Cheng, J., &amp; Tan, X. (2019). <em>DT: A Wrapper of the JavaScript Library ’DataTables’</em>. Recuperado a partir de <a href="https://CRAN.R-project.org/package=DT">https://CRAN.R-project.org/package=DT</a></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basico.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graficos-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
